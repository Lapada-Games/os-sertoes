[gd_scene load_steps=13 format=3 uid="uid://ctlnsv7r3syn7"]

[ext_resource type="Texture2D" uid="uid://bpdp15k5bejr" path="res://Assets/Scenario/scene.png" id="1_2gg6k"]
[ext_resource type="Script" path="res://Scenes/Map.gd" id="1_ms0u8"]
[ext_resource type="PackedScene" uid="uid://commjrcmkwfx6" path="res://Scenes/DialogBox.tscn" id="2_7u5e1"]
[ext_resource type="Resource" uid="uid://lv8dt538ap63" path="res://Resources/LevelData/Levels/Level4.tres" id="2_vsq1q"]
[ext_resource type="PackedScene" uid="uid://c4yhjj6tnm7f3" path="res://Scenes/HUD.tscn" id="4_3hc8h"]
[ext_resource type="AudioStream" uid="uid://cymwv6py2j7dm" path="res://OST/prebattle.mp3" id="5_47qgm"]
[ext_resource type="PackedScene" uid="uid://d0jlqcwnie8k8" path="res://Scenes/Path.tscn" id="6_a766w"]
[ext_resource type="Curve2D" uid="uid://1xlyu04rux28" path="res://Resources/LevelData/Paths/Path2.tres" id="7_h7uqg"]
[ext_resource type="AudioStream" uid="uid://bc7afcatvc438" path="res://OST/battle02.ogg" id="9_ml8yh"]

[sub_resource type="Animation" id="Animation_8oocm"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera2D:enabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Camera2D:zoom")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Camera2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_x4yq3"]
resource_name = "zoom_matadeira"
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Camera2D:enabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Camera2D:zoom")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(2.56, 2.56)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Camera2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(600, 2)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_xhkyk"]
_data = {
"RESET": SubResource("Animation_8oocm"),
"zoom_matadeira": SubResource("Animation_x4yq3")
}

[node name="Map" type="Node2D"]
script = ExtResource("1_ms0u8")
level_data = ExtResource("2_vsq1q")

[node name="DialogBox" parent="." instance=ExtResource("2_7u5e1")]
layer = 4
visible = false
scene_text_file = "res://Dialogs/tutorial_dialog.json"

[node name="HUD" parent="." instance=ExtResource("4_3hc8h")]
layer = 2

[node name="bg" type="Sprite2D" parent="."]
scale = Vector2(0.833984, 0.833984)
texture = ExtResource("1_2gg6k")
centered = false
metadata/_edit_lock_ = true

[node name="Path2D" parent="." instance=ExtResource("6_a766w")]
arrow_color = Color(1, 0.211765, 0, 1)

[node name="Path2D2" parent="." instance=ExtResource("6_a766w")]
curve = ExtResource("7_h7uqg")
arrow_color = Color(1, 0.368627, 0.2, 1)

[node name="SpawnTimer" type="Timer" parent="."]

[node name="Prebattle" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_47qgm")
volume_db = -7.495
autoplay = true

[node name="Theme" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_ml8yh")
volume_db = -7.495

[node name="Towers" type="Node2D" parent="."]

[node name="ProhibitedAreas" type="Node2D" parent="."]
visible = false

[node name="Area1" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area1"]
polygon = PackedVector2Array(16, 409, 29, 284, 147, 277, 359, 289, 669, 284, 885, -3, 974, -3, 892, 88, 754, 246, 746, 312, 949, 453, 1294, 906, 1154, 940, 1155, 840, 956, 612, 781, 567, 548, 565, 409, 581, 316, 656, 207, 859, 124, 863, 245, 658, 364, 551, 544, 533, 879, 535, 899, 476, 781, 376, 585, 327, 158, 323, 163, 406, 102, 437)

[node name="Area2" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area2"]
polygon = PackedVector2Array(77, 474, 193, 389, 271, 366, 332, 417, 330, 541, 160, 607, 81, 558)

[node name="Area3" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area3"]
position = Vector2(538, 237)
polygon = PackedVector2Array(97, 413, 148, 376, 241, 395, 270, 441, 341, 492, 338, 555, 282, 586, 109, 538)

[node name="Area4" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area4"]
position = Vector2(266, 241)
polygon = PackedVector2Array(114, 437, 219, 390, 268, 421, 275, 504, 198, 541, 114, 522)

[node name="Area5" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area5"]
position = Vector2(783, -224)
polygon = PackedVector2Array(107, 434, 163, 386, 272, 408, 265, 515, 203, 556, 109, 538)

[node name="Area6" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area6"]
position = Vector2(975, 36)
polygon = PackedVector2Array(107, 414, 163, 386, 226, 404, 227, 461, 287, 514, 276, 565, 239, 575, 183, 566, 111, 550)

[node name="Area7" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area7"]
position = Vector2(-63, -334)
polygon = PackedVector2Array(107, 414, 163, 386, 221, 407, 218, 550, 183, 566, 111, 550)

[node name="Area8" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area8"]
position = Vector2(116, -335)
polygon = PackedVector2Array(141, 441, 177, 359, 212, 415, 231, 544, 154, 566, 111, 550, 71, 535, 77, 470, 107, 435)

[node name="Area9" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area9"]
position = Vector2(1021, -312)
polygon = PackedVector2Array(73, 337, 145, 345, 232, 452, 231, 544, 154, 566, 111, 550, 30, 517, 25, 447, 23, 351)

[node name="Area10" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area10"]
position = Vector2(1017, -101)
polygon = PackedVector2Array(74, 384, 119, 397, 183, 422, 198, 503, 150, 515, 104, 503, 32, 476, 36, 431, 68, 426)

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
enabled = false

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_xhkyk")
}

[node name="MatadeiraZoomTimer" type="Timer" parent="."]
wait_time = 78.0
one_shot = true

[node name="Fade" type="ColorRect" parent="."]
visible = false
offset_right = 1365.0
offset_bottom = 846.0
color = Color(0, 0, 0, 1)

[connection signal="on_dialog_finished" from="DialogBox" to="." method="_on_dialog_box_on_dialog_finished"]
[connection signal="reset" from="HUD" to="." method="_on_hud_reset"]
[connection signal="wave_start" from="HUD" to="." method="_on_hud_wave_start"]
[connection signal="child_exiting_tree" from="Path2D" to="." method="_on_path_2d_child_exiting_tree"]
[connection signal="child_exiting_tree" from="Path2D2" to="." method="_on_path_2d_child_exiting_tree"]
[connection signal="timeout" from="SpawnTimer" to="." method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="MatadeiraZoomTimer" to="." method="_on_matadeira_zoom_timer_timeout"]
