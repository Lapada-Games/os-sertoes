[gd_scene load_steps=8 format=3 uid="uid://ctlnsv7r3syn7"]

[ext_resource type="Texture2D" uid="uid://bpdp15k5bejr" path="res://Assets/Scenario/scene.png" id="1_2gg6k"]
[ext_resource type="Script" path="res://Scenes/Map.gd" id="1_ms0u8"]
[ext_resource type="PackedScene" uid="uid://commjrcmkwfx6" path="res://Scenes/DialogBox.tscn" id="2_7u5e1"]
[ext_resource type="PackedScene" uid="uid://c4yhjj6tnm7f3" path="res://Scenes/HUD.tscn" id="4_3hc8h"]
[ext_resource type="Curve2D" uid="uid://ug0vvtwuq3nl" path="res://Resources/Paths/Stage1.tres" id="4_anelk"]
[ext_resource type="AudioStream" uid="uid://cymwv6py2j7dm" path="res://OST/prebattle.mp3" id="5_47qgm"]
[ext_resource type="Script" path="res://Scenes/LevelManager.gd" id="5_udjft"]

[node name="Map" type="Node2D"]
script = ExtResource("1_ms0u8")

[node name="DialogBox" parent="." instance=ExtResource("2_7u5e1")]
layer = 4
visible = false
scene_text_file = "res://Dialogs/tutorial_dialog.json"

[node name="HUD" parent="." instance=ExtResource("4_3hc8h")]
layer = 2

[node name="bg" type="Sprite2D" parent="."]
scale = Vector2(0.833984, 0.833984)
texture = ExtResource("1_2gg6k")
centered = false
metadata/_edit_lock_ = true

[node name="Towers" type="Node2D" parent="."]

[node name="LevelManager" type="Node2D" parent="."]
script = ExtResource("5_udjft")

[node name="Path2D" type="Path2D" parent="LevelManager"]
curve = ExtResource("4_anelk")

[node name="SpawnTimer" type="Timer" parent="LevelManager"]

[node name="Music" type="AudioStreamPlayer" parent="LevelManager"]
stream = ExtResource("5_47qgm")
volume_db = -7.495
autoplay = true

[node name="ProhibitedAreas" type="Node2D" parent="."]

[node name="Area1" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area1"]
polygon = PackedVector2Array(16, 409, 19, 249, 141, 264, 359, 274, 661, 264, 885, -3, 974, -3, 913, 104, 778, 241, 760, 305, 966, 452, 1314, 901, 1154, 940, 1139, 846, 951, 630, 788, 581, 557, 574, 417, 597, 329, 663, 224, 858, 108, 858, 229, 647, 349, 536, 870, 518, 880, 485, 760, 391, 585, 345, 163, 338, 163, 406, 102, 437)

[node name="Area2" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area2"]
polygon = PackedVector2Array(77, 474, 193, 389, 271, 366, 332, 417, 330, 541, 160, 607, 81, 558)

[node name="Area3" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area3"]
position = Vector2(538, 237)
polygon = PackedVector2Array(97, 413, 148, 376, 241, 395, 291, 426, 341, 492, 338, 555, 282, 586, 109, 538)

[node name="Area4" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area4"]
position = Vector2(266, 241)
polygon = PackedVector2Array(107, 434, 216, 391, 268, 421, 275, 504, 198, 541, 114, 522)

[node name="Area5" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area5"]
position = Vector2(783, -224)
polygon = PackedVector2Array(107, 434, 163, 386, 272, 408, 272, 502, 198, 527, 104, 509)

[node name="Area6" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area6"]
position = Vector2(975, 36)
polygon = PackedVector2Array(107, 414, 163, 386, 226, 404, 227, 461, 287, 514, 276, 565, 239, 575, 183, 566, 111, 550)

[connection signal="on_dialog_finished" from="DialogBox" to="." method="_on_dialog_box_on_dialog_finished"]
[connection signal="reset" from="HUD" to="." method="_on_hud_reset"]
[connection signal="wave_start" from="HUD" to="LevelManager" method="_on_hud_wave_start"]
[connection signal="child_exiting_tree" from="LevelManager/Path2D" to="." method="_on_path_2d_child_exiting_tree"]
[connection signal="child_exiting_tree" from="LevelManager/Path2D" to="LevelManager" method="_on_path_2d_child_exiting_tree"]
[connection signal="timeout" from="LevelManager/SpawnTimer" to="LevelManager" method="_on_spawn_timer_timeout"]
