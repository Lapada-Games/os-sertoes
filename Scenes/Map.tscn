[gd_scene load_steps=9 format=3 uid="uid://ctlnsv7r3syn7"]

[ext_resource type="Texture2D" uid="uid://bpdp15k5bejr" path="res://Assets/Scenario/scene.png" id="1_2gg6k"]
[ext_resource type="Script" path="res://Scenes/Map.gd" id="1_ms0u8"]
[ext_resource type="PackedScene" uid="uid://commjrcmkwfx6" path="res://Scenes/DialogBox.tscn" id="2_7u5e1"]
[ext_resource type="PackedScene" uid="uid://c4yhjj6tnm7f3" path="res://Scenes/HUD.tscn" id="4_3hc8h"]
[ext_resource type="Curve2D" uid="uid://ug0vvtwuq3nl" path="res://Resources/Paths/Stage1.tres" id="4_anelk"]
[ext_resource type="AudioStream" uid="uid://cymwv6py2j7dm" path="res://OST/prebattle.mp3" id="5_47qgm"]
[ext_resource type="Script" path="res://Scenes/LevelManager.gd" id="5_udjft"]
[ext_resource type="Texture2D" uid="uid://frj7q8pb7yal" path="res://Assets/Misc/arrow.png" id="7_s7ldw"]

[node name="Map" type="Node2D"]
script = ExtResource("1_ms0u8")

[node name="DialogBox" parent="." instance=ExtResource("2_7u5e1")]
layer = 4
scene_text_file = "res://Dialogs/tutorial_dialog.json"

[node name="HUD" parent="." instance=ExtResource("4_3hc8h")]
layer = 2

[node name="bg" type="Sprite2D" parent="."]
scale = Vector2(0.833984, 0.833984)
texture = ExtResource("1_2gg6k")
centered = false
metadata/_edit_lock_ = true

[node name="LevelManager" type="Node2D" parent="."]
script = ExtResource("5_udjft")

[node name="Path2D" type="Path2D" parent="LevelManager"]
curve = ExtResource("4_anelk")

[node name="Arrow1" type="PathFollow2D" parent="LevelManager/Path2D"]
position = Vector2(1008.56, 611.966)
rotation = -2.23087
progress = 478.542

[node name="Sprite2D" type="Sprite2D" parent="LevelManager/Path2D/Arrow1"]
position = Vector2(1.22635, -1.57985)
rotation = 0.0153732
scale = Vector2(2.61538, 2.61538)
texture = ExtResource("7_s7ldw")

[node name="Arrow2" type="PathFollow2D" parent="LevelManager/Path2D"]
position = Vector2(784.096, 365.3)
rotation = -2.58423
progress = 821.21

[node name="Sprite2D" type="Sprite2D" parent="LevelManager/Path2D/Arrow2"]
position = Vector2(1.22635, -1.57985)
rotation = 0.0153732
scale = Vector2(2.61538, 2.61538)
texture = ExtResource("7_s7ldw")

[node name="Arrow3" type="PathFollow2D" parent="LevelManager/Path2D"]
position = Vector2(805.372, 144.19)
rotation = -0.694738
progress = 1117.46

[node name="Sprite2D" type="Sprite2D" parent="LevelManager/Path2D/Arrow3"]
position = Vector2(1.22635, -1.57985)
rotation = 0.0153732
scale = Vector2(2.61538, 2.61538)
texture = ExtResource("7_s7ldw")

[node name="SpawnTimer" type="Timer" parent="LevelManager"]

[node name="Music" type="AudioStreamPlayer" parent="LevelManager"]
stream = ExtResource("5_47qgm")
volume_db = -7.495
autoplay = true

[node name="Towers" type="Node2D" parent="LevelManager"]

[node name="ProhibitedAreas" type="Node2D" parent="."]
visible = false

[node name="Area1" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area1"]
polygon = PackedVector2Array(16, 409, 29, 284, 147, 277, 359, 289, 669, 284, 885, -3, 974, -3, 892, 88, 754, 246, 746, 312, 949, 453, 1294, 906, 1154, 940, 1155, 840, 956, 612, 781, 567, 548, 565, 409, 581, 316, 656, 207, 859, 124, 863, 245, 658, 364, 551, 544, 533, 879, 535, 899, 476, 781, 376, 585, 327, 158, 323, 163, 406, 102, 437)

[node name="Area2" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area2"]
polygon = PackedVector2Array(77, 474, 193, 389, 271, 366, 332, 417, 330, 541, 160, 607, 81, 558)

[node name="Area3" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area3"]
position = Vector2(538, 237)
polygon = PackedVector2Array(97, 413, 148, 376, 241, 395, 270, 441, 341, 492, 338, 555, 282, 586, 109, 538)

[node name="Area4" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area4"]
position = Vector2(266, 241)
polygon = PackedVector2Array(114, 437, 219, 390, 268, 421, 275, 504, 198, 541, 114, 522)

[node name="Area5" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area5"]
position = Vector2(783, -224)
polygon = PackedVector2Array(107, 434, 163, 386, 272, 408, 265, 515, 203, 556, 109, 538)

[node name="Area6" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area6"]
position = Vector2(975, 36)
polygon = PackedVector2Array(107, 414, 163, 386, 226, 404, 227, 461, 287, 514, 276, 565, 239, 575, 183, 566, 111, 550)

[node name="Area7" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area7"]
position = Vector2(-63, -334)
polygon = PackedVector2Array(107, 414, 163, 386, 221, 407, 218, 550, 183, 566, 111, 550)

[node name="Area8" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area8"]
position = Vector2(116, -335)
polygon = PackedVector2Array(141, 441, 177, 359, 212, 415, 231, 544, 154, 566, 111, 550, 71, 535, 77, 470, 107, 435)

[node name="Area9" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area9"]
position = Vector2(1021, -312)
polygon = PackedVector2Array(73, 337, 145, 345, 232, 452, 231, 544, 154, 566, 111, 550, 30, 517, 25, 447, 23, 351)

[node name="Area10" type="Area2D" parent="ProhibitedAreas"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ProhibitedAreas/Area10"]
position = Vector2(1017, -101)
polygon = PackedVector2Array(74, 384, 119, 397, 183, 422, 198, 503, 150, 515, 104, 503, 32, 476, 36, 431, 68, 426)

[connection signal="on_dialog_finished" from="DialogBox" to="." method="_on_dialog_box_on_dialog_finished"]
[connection signal="reset" from="HUD" to="." method="_on_hud_reset"]
[connection signal="wave_start" from="HUD" to="LevelManager" method="_on_hud_wave_start"]
[connection signal="child_exiting_tree" from="LevelManager/Path2D" to="." method="_on_path_2d_child_exiting_tree"]
[connection signal="child_exiting_tree" from="LevelManager/Path2D" to="LevelManager" method="_on_path_2d_child_exiting_tree"]
[connection signal="timeout" from="LevelManager/SpawnTimer" to="LevelManager" method="_on_spawn_timer_timeout"]
